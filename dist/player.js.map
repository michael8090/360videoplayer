{"version":3,"sources":["webpack:///webpack/bootstrap 8d10a387e9f11c4504fc","webpack:///./src/player.js","webpack:///./~/.1.0.14@three-stereo-effect/index.js","webpack:///./~/.3.0.2@screenfull/dist/screenfull.js","webpack:///./src/math.js"],"names":["StereoEffect","require","THREE","fullscreen","domFromString","htmlString","parent","document","createElement","innerHTML","firstElementChild","isWebGLSupported","canvas","window","WebGLRenderingContext","getContext","e","Player","module","exports","containerId","enableSensorControl","isOnStereoMode","container","getElementById","Error","w","offsetWidth","h","offsetHeight","camera","PerspectiveCamera","position","x","y","z","lookAt","Vector3","scene","Scene","createSphere","createArrow","renderer","WebGLRenderer","CanvasRenderer","setSize","stereoEffect","eyeSeparation","sensorControls","DeviceOrientationController","domElement","connect","enableSensor","disableSensor","appendChild","animate","video","addEventListener","setTime","onResize","body","texture","VideoTexture","minFilter","LinearFilter","magFilter","format","RGBFormat","sphere","Mesh","SphereGeometry","MeshBasicMaterial","map","side","BackSide","rotateY","Math","PI","add","loader","TextureLoader","arrowMaterials","load","i","currentArrowIndex","arrow","PlaneGeometry","MeshPhongMaterial","transparent","DoubleSide","p","uv2xyz","rotateX","lastDrawTime","Date","now","length","material","needUpdate","enabled","request","videoUrl","setAttribute","duration","time","currentTime","play","pause","render","updateArrow","update","requestAnimationFrame","aspect","updateProjectionMatrix","enableDeviceMove","enableStereoMode","disableStereoMode","u","v","r","theta","phi","cos","sin"],"mappings":"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CA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;;;;;;;;;;AC5JA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAAQ,OAAO;AACf;AACA;AACA,wCAAuC,eAAe;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;AACF;AACA;AACA,EAAC;;;;;;;;;;;;;;;AChJD;;;mBAGgB;AACZqE,WADY,kBACL0B,CADK,EACFC,CADE,EACCC,CADD,EACG;AACX,aAAIC,QAAQ5C,KAAKC,EAAL,GAAUwC,CAAV,GAAc,GAA1B;AACA,aAAII,MAAMH,IAAI1C,KAAKC,EAAnB;AACA,aAAI5C,IAAI,CAAC2C,KAAK8C,GAAL,CAASF,KAAT,CAAD,GAAmB5C,KAAK+C,GAAL,CAASF,GAAT,CAAnB,GAAmCF,CAA3C;AACA,aAAIpF,IAAI,CAACyC,KAAK+C,GAAL,CAASH,KAAT,CAAD,GAAmB5C,KAAK+C,GAAL,CAASF,GAAT,CAAnB,GAAmCF,CAA3C;AACA,aAAIrF,IAAI0C,KAAK8C,GAAL,CAASD,GAAT,IAAgBF,CAAxB;AACA;AACA,gBAAO,EAACtF,GAAG,CAACE,CAAL,EAAQD,IAAR,EAAWC,GAAGF,CAAd,EAAP;AACH;AATW,E","file":"dist/player.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8d10a387e9f11c4504fc\n **/","/* global THREE */\n// var OrbitControls = require('three-orbit-controls')(THREE);\nvar StereoEffect = require('three-stereo-effect')(THREE);\nvar fullscreen = require('screenfull');\nimport math from './math';\n\nfunction domFromString(htmlString) {\n    const parent = document.createElement('div');\n    parent.innerHTML = htmlString;\n    return parent.firstElementChild;\n}\n\nconst isWebGLSupported = (function () {\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n        return false;\n    }\n})();\n\n\nwindow.Player = module.exports = class Player {\n    constructor({containerId, enableSensorControl = false, isOnStereoMode = false} = {}) {\n        this.isOnStereoMode = isOnStereoMode;\n        const container = document.getElementById(containerId);\n        if (!container) {\n            throw new Error(`container is not found: ${containerId}`);\n        }\n\n        this.container = container;\n\n        const w = container.offsetWidth;\n        const h = container.offsetHeight;\n        const camera = new THREE.PerspectiveCamera(75, w / h, 0.01, 1000);\n        camera.position.x = 0;\n        camera.position.y = 0;\n        camera.position.z = 0;\n        camera.lookAt(new THREE.Vector3(0, 0, 1));\n\n        this.camera = camera;\n\n        this.scene = new THREE.Scene();\n\n        this.createSphere();\n        this.createArrow();\n\n        const renderer = isWebGLSupported ? new THREE.WebGLRenderer() : new THREE.CanvasRenderer();\n        renderer.setSize(container.offsetWidth, container.offsetHeight);\n        this.renderer = renderer;\n\n        const stereoEffect = new StereoEffect(renderer);\n        stereoEffect.eyeSeparation = 1;\n        stereoEffect.setSize(w, h);\n        this.stereoEffect = stereoEffect;\n\n        this.sensorControls = new DeviceOrientationController(camera, renderer.domElement);\n        this.sensorControls.connect();\n\n        if (enableSensorControl) {\n            this.enableSensor();\n        } else {\n            this.disableSensor();\n        }\n\n        container.appendChild(renderer.domElement);\n\n        this.animate();\n\n        this.video.addEventListener('ended', () => this.setTime(0));\n        window.addEventListener('resize', this.onResize);\n    }\n\n    render = () => {\n        this.updateArrow();\n        this.sensorControls.update();\n        if (this.isOnStereoMode) {\n            this.stereoEffect.render(this.scene, this.camera);\n        } else {\n            this.renderer.render(this.scene, this.camera);\n        }\n    };\n\n    animate = () => {\n        this.render();\n        requestAnimationFrame(this.animate);\n    };\n\n    createSphere() {\n        const video = domFromString(`\n            <video style=\"display: none;\" loop preload=\"auto\" id=\"video\" webkit-playsinline crossOrigin=\"anonymous\">\n                <source type=\"video/mp4\">\n            </video>\n        `);\n        this.video = video;\n        document.body.appendChild(video);\n\n        const texture = new THREE.VideoTexture(video);\n        texture.minFilter = THREE.LinearFilter;\n        texture.magFilter = THREE.LinearFilter;\n        texture.format = THREE.RGBFormat;\n\n        const sphere = new THREE.Mesh(\n            new THREE.SphereGeometry(100, 80, 80),\n            new THREE.MeshBasicMaterial({\n                map: texture,\n                side: THREE.BackSide\n            })\n        );\n\n        sphere.rotateY(-Math.PI * 0.5);\n\n        this.scene.add(sphere);\n    }\n\n    createArrow() {\n        const loader = new THREE.TextureLoader();\n        this.arrowMaterials = [1, 2, 3].map(i => loader.load(`images/arr${i}.png`));\n        this.currentArrowIndex = 0;\n        this.arrow = new THREE.Mesh(\n            new THREE.PlaneGeometry(1.4, 2),\n            new THREE.MeshPhongMaterial({\n                map: this.arrowMaterials[this.currentArrowIndex],\n                transparent: true,\n                side: THREE.DoubleSide\n            })\n            // new THREE.MeshBasicMaterial( {color: 0xffff00, side: THREE.DoubleSide} ),\n\n        );\n        // this.arrow.position.x = 0;\n        // this.arrow.position.y = -3;\n        // this.arrow.position.z = 10;\n        // this.arrow.rotateY(-Math.PI * 0.5);\n        const p = math.uv2xyz(0.5, 0.5, 10);\n        this.arrow.position.x = p.x;\n        this.arrow.position.y = p.y;\n        this.arrow.position.z = p.z;\n        this.arrow.rotateX(-Math.PI * 0.2);\n        this.scene.add(this.arrow);\n        this.lastDrawTime = Date.now();\n    }\n\n    updateArrow() {\n        if (Date.now() - this.lastDrawTime < 300) {\n            return;\n        }\n        this.lastDrawTime = Date.now();\n        this.currentArrowIndex = (this.currentArrowIndex + 1) % this.arrowMaterials.length;\n        this.arrow.material.map = this.arrowMaterials[this.currentArrowIndex];\n        this.arrow.material.needUpdate = true;\n    }\n\n    onResize = () => {\n        const {container: {offsetWidth: w, offsetHeight: h}} = this;\n        this.camera.aspect = w / h;\n        this.camera.updateProjectionMatrix();\n\n        this.renderer.setSize(w, h);\n        this.stereoEffect.setSize(w, h);\n    };\n\n    enableSensor = () => {\n        this.sensorControls.enableDeviceMove = true;\n    };\n\n    disableSensor = () => {\n        this.sensorControls.enableDeviceMove = false;\n    };\n\n    enableStereoMode = () => this.isOnStereoMode = true;\n\n    disableStereoMode = () => this.isOnStereoMode = false;\n\n    // we need to call inside an user action handler\n    enterFullScreen() {\n        if (fullscreen.enabled) {\n            fullscreen.request();\n        }\n    }\n\n    loadVideo(videoUrl = '') {\n        this.video.firstElementChild.setAttribute('src', videoUrl);\n    };\n\n    getDuration() {\n        return this.video.duration;\n    }\n\n    setTime(time) {\n        this.video.currentTime = time;\n    }\n\n    play() {\n        this.video.play();\n    }\n\n    pause() {\n        this.video.pause();\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/player.js\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n * @authod mrdoob / http://mrdoob.com/\n * @authod arodic / http://aleksandarrodic.com/\n * @authod fonserbc / http://fonserbc.github.io/\n * @authod samsy / http://samsy.ninja/\n *\n * Off-axis stereoscopic effect based on http://paulbourke.net/stereographics/stereorender/\n */\n\n\nmodule.exports = function(THREE, renderer) {\n\n\tfunction StereoEffect(renderer){\n\n\n\t\tvar scope = this;\n\n\t\tthis.eyeSeparation = 3;\n\t\tthis.focalLength = 15; \t// Distance to the non-parallax or projection plane\n\n\t\tObject.defineProperties( this, {\n\t\t\tseparation: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn scope.eyeSeparation;\n\n\t\t\t\t},\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.StereoEffect: .separation is now .eyeSeparation.' );\n\t\t\t\t\tscope.eyeSeparation = value;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\ttargetDistance: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn scope.focalLength;\n\n\t\t\t\t},\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.StereoEffect: .targetDistance is now .focalLength.' );\n\t\t\t\t\tscope.focalLength = value;\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// internals\n\n\t\tvar _width, _height;\n\n\t\tvar _position = new THREE.Vector3();\n\t\tvar _quaternion = new THREE.Quaternion();\n\t\tvar _scale = new THREE.Vector3();\n\n\t\tvar _cameraL = new THREE.PerspectiveCamera();\n\t\tvar _cameraR = new THREE.PerspectiveCamera();\n\n\t\tvar _fov;\n\t\tvar _outer, _inner, _top, _bottom;\n\t\tvar _ndfl, _halfFocalWidth, _halfFocalHeight;\n\t\tvar _innerFactor, _outerFactor;\n\n\t\t// initialization\n\n\t\trenderer.autoClear = false;\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width / 2;\n\t\t\t_height = height;\n\n\t\t\trenderer.setSize( width, height );\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tscene.updateMatrixWorld();\n\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tcamera.matrixWorld.decompose( _position, _quaternion, _scale );\n\n\t\t\t// Effective fov of the camera\n\n\t\t\t_fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( camera.fov ) * 0.5 ) / camera.zoom ) );\n\n\t\t\t_ndfl = camera.near / this.focalLength;\n\t\t\t_halfFocalHeight = Math.tan( THREE.Math.degToRad( _fov ) * 0.5 ) * this.focalLength;\n\t\t\t_halfFocalWidth = _halfFocalHeight * 0.5 * camera.aspect;\n\n\t\t\t_top = _halfFocalHeight * _ndfl;\n\t\t\t_bottom = - _top;\n\t\t\t_innerFactor = ( _halfFocalWidth + this.eyeSeparation / 2.0 ) / ( _halfFocalWidth * 2.0 );\n\t\t\t_outerFactor = 1.0 - _innerFactor;\n\n\t\t\t_outer = _halfFocalWidth * 2.0 * _ndfl * _outerFactor;\n\t\t\t_inner = _halfFocalWidth * 2.0 * _ndfl * _innerFactor;\n\n\t\t\t// left\n\n\t\t\t_cameraL.projectionMatrix.makeFrustum(\n\t\t\t\t- _outer,\n\t\t\t\t_inner,\n\t\t\t\t_bottom,\n\t\t\t\t_top,\n\t\t\t\tcamera.near,\n\t\t\t\tcamera.far\n\t\t\t);\n\n\t\t\t_cameraL.position.copy( _position );\n\t\t\t_cameraL.quaternion.copy( _quaternion );\n\t\t\t_cameraL.translateX( - this.eyeSeparation / 2.0 );\n\n\t\t\t// right\n\n\t\t\t_cameraR.projectionMatrix.makeFrustum(\n\t\t\t\t- _inner,\n\t\t\t\t_outer,\n\t\t\t\t_bottom,\n\t\t\t\t_top,\n\t\t\t\tcamera.near,\n\t\t\t\tcamera.far\n\t\t\t);\n\n\t\t\t_cameraR.position.copy( _position );\n\t\t\t_cameraR.quaternion.copy( _quaternion );\n\t\t\t_cameraR.translateX( this.eyeSeparation / 2.0 );\n\n\t\t\t//\n\n\t\t\trenderer.clear();\n\t\t\trenderer.setScissorTest( true );\n\n\t\t\trenderer.setScissor( 0, 0, _width, _height );\n\t\t\trenderer.setViewport( 0, 0, _width, _height );\n\t\t\trenderer.render( scene, _cameraL );\n\n\t\t\trenderer.setScissor( _width, 0, _width, _height );\n\t\t\trenderer.setViewport( _width, 0, _width, _height );\n\t\t\trenderer.render( scene, _cameraR );\n\n\t\t\trenderer.setScissorTest( false );\n\n\t\t};\n\n\t}\n\n\n\t\tStereoEffect.prototype = Object.create( THREE.EventDispatcher.prototype );\n\t\tStereoEffect.prototype.constructor = StereoEffect;\n\t\treturn StereoEffect;\n};\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.1.0.14@three-stereo-effect/index.js\n ** module id = 1\n ** module chunks = 0\n **/","/*!\n* screenfull\n* v3.0.0 - 2015-11-24\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\tvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\n\tvar fn = (function () {\n\t\tvar val;\n\t\tvar valLength;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// new WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0, valLength = val.length; i < valLength; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar screenfull = {\n\t\trequest: function (elem) {\n\t\t\tvar request = fn.requestFullscreen;\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\t// Work around Safari 5.1 bug: reports support for\n\t\t\t// keyboard in fullscreen even though it doesn't.\n\t\t\t// Browser sniffing, since the alternative with\n\t\t\t// setTimeout is even worse.\n\t\t\tif (/5\\.1[\\.\\d]* Safari/.test(navigator.userAgent)) {\n\t\t\t\telem[request]();\n\t\t\t} else {\n\t\t\t\telem[request](keyboardAllowed && Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t}\n\t\t},\n\t\texit: function () {\n\t\t\tdocument[fn.exitFullscreen]();\n\t\t},\n\t\ttoggle: function (elem) {\n\t\t\tif (this.isFullscreen) {\n\t\t\t\tthis.exit();\n\t\t\t} else {\n\t\t\t\tthis.request(elem);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = false;\n\t\t} else {\n\t\t\twindow.screenfull = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.3.0.2@screenfull/dist/screenfull.js\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * Created by yong on 8/26/16.\n */\nexport  default {\n    uv2xyz(u, v, r){\n        var theta = Math.PI * u * 2.0;\n        var phi = v * Math.PI;\n        var x = -Math.cos(theta) * Math.sin(phi) * r;\n        var z = -Math.sin(theta) * Math.sin(phi) * r;\n        var y = Math.cos(phi) * r;\n        // we just need to rotate x to 4pi/3\n        return {x: -z, y, z: x};\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/math.js\n **/"],"sourceRoot":""}